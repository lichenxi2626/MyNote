#  Linux

***

## 第一章 Linux入门

### 1.1 概述

- Linux最初由**林纳斯·托瓦兹**编写，是一套免费试用的类Unix操作系统。
- 比较知名的发行版：**Ubuntu**、**RedHat**、**CentOs**、Debain、Fedora、SuSE、OpenSUSE。

### 1.2 Linux和Windows区别

|            | Windows                                            | Linux                                                        |
| ---------- | -------------------------------------------------- | ------------------------------------------------------------ |
| 免费或收费 | 收费                                               | 免费或收费                                                   |
| 软件与支持 | 数量多且质量高；大部分收费；微软提供技术支持和服务 | 软件开源，用户可以行定制修改；由于没有资金支持，质量有所欠缺；由全球的Linux开发者和社区提供支持 |
| 安全性     | 系统安全更新较多，但安全漏洞依然多                 | 并非完全没有安全漏洞，但安全性非常高                         |
| 使用习惯   | 普通用户一般使用图形化界面操作，入门简单易上手     | 一般使用命令行操作，入门困难，需要学习相关知识作为支撑，熟练后操作效率高 |
| 可定制性   | **封闭，可定制性差**                               | **开源，可定制性强**                                         |
| 应用场景   | 作为桌面操作系统使用                               | 作为大型软件和服务的服务器主机使用                           |

### 1.3 CentOS下载地址

- 网易镜像：http://mirrors.163.com/centos/7/isos/
- 搜狐镜像：http://mirrors.sohu.com/centos/7/isos/



## 第二章 VM与Linux的安装

### 2.1 VMWare的安装

### 2.2 CentOS的安装



## 第三章 Linux文件与目录结构

### 3.1 Linux文件

- Linux系统中一切皆文件。

### 3.2 Linux目录结构

Linux目录结构简介：

![image-20200401190056504](linux.assets/image-20200401190056504.png)

| 目录名            | 介绍                                                         |
| ----------------- | ------------------------------------------------------------ |
| **bin**           | Binary的缩写，该目录用于存放最常用的命令                     |
| dev               | 设备管理目录，将所有的硬件信息以文件的形式存储               |
| **home**          | 存放各个普通用户的主目录，该目录下的各子目录以不同用户的账号名命名 |
| lib lib64         | 系统开机所需要的最基本的动态连接共享库                       |
| **media** **run** | U盘、光驱、镜像文件等设备被Linux系统识别后会挂载到该目录下（CentOS7后迁移到/run中） |
| **opt**           | 额外安装的的软件的存储目录（如MySQL数据库）                  |
| **root**          | 系统管理员的主目录                                           |
| sbin              | s代表Super User，该目录用于存放系统管理员使用的系统管理程序  |
| sys               | 用于存放Linux2.6内核的一个文件系统sysfs                      |
| **usr**           | 用于存放用户的应用程序和文件                                 |
| **boot**          | 用于存放Linux启动时的核心文件，以及一些连接和镜像文件        |
| **etc**           | 存放所有系统管理所需的配置文件和子目录                       |
| lost+found        | 系统非法关机后，会在该目录下存放一些文件                     |
| **mnt**           | 用于临时挂载外部存储的临时系统                               |
| proc              | 该目录为虚拟目录，是系统内存的映射，可以通过访问这个目录获取系统信息 |
| srv               | Service的缩写，用于存放一些服务启动之后需要提取的数据        |
| tmp               | 用于存放临时文件                                             |
| **var**           | 存储经常被修改的目录、文件，包括各种日志文件                 |



## 第四章 VI/VIM编辑器

### 4.1 概述

- VI是Unix操作系统和类Unix操作系统中最为通用的**文本编辑器**；

- VIM是从Vi发展出的一个性能更加强大的文本编辑器，可以自动的以字体颜色辨别语法正确性，方便程序设计；

- VI与VIM编辑器互相兼容。

- 最小化安装的Linux系统需要手动安装vim编辑器

  ``` shell
  yum -y install vim*
  ```

  

### 4.2 一般模式

- 以vi打开一个文件即进入一般模式，一般模式下的常用指令如下

| 语法               | 功能描述                             |
| ------------------ | ------------------------------------ |
| **yy**             | 复制光标所在行                       |
| y [数字] y         | 复制光标所在行开始共 [数字] 行的内容 |
| **p**              | 将复制的内容粘贴到当前行             |
| **u**              | 撤消                                 |
| **dd**             | 删除光标所在行                       |
| d [数字] d         | 删除光标所在行开始共 [数字] 行的内容 |
| x                  | 删除一个字母，相当于del              |
| X                  | 删除一个字母，相当于Backsapce        |
| yw                 | 复制一个单词                         |
| dw                 | 删除一个单词                         |
| shift+^            | 光标移动到行首                       |
| shift+$            | 光标移动到行尾                       |
| 1+shift+g          | 光标移动到页首                       |
| shift+g            | 光标移动到页尾                       |
| [数字] + shift + g | 光标移动到 [数字] 行                 |

### 4.3 编辑模式

- 在一般模式下，输入i，a，o，I，A，O之一后进入编辑模式，相应作用如下

| 按键 | 功能                 |
| ---- | -------------------- |
| i    | 光标到当前位置前     |
| I    | 光标到当前位置行首   |
| a    | 光标到当前位置后     |
| A    | 光标到当前位置行尾   |
| o    | 光标到当前行的下一行 |
| O    | 光标到当前行的上一行 |

- 在编辑模式下，按Esc键回到一般模式

### 4.4 指令模式

- 在一般模式下，输入:,/,?之一后光标自动移动到底部，进入指令模式；
- 常用指令

| 指令                         | 功能                           |
| ---------------------------- | ------------------------------ |
| :w                           | 保存                           |
| :q                           | 退出                           |
| :!                           | 强制执行                       |
| /[待查找的字符串]            | n查找下一个，N查找上一个       |
| ?[待查找的字符串]            | n查找上一个，shift+n查找下一个 |
| :set nu                      | 显示行号                       |
| :set nonu                    | 关闭行号                       |
| :%s/[原字符串]]/[新字符串]/g | 替换内容                       |

- 强制保存退出:wq!，可编辑并写入只读文件。



## 第五章 查看网络IP和网关（需要配置）

### 5.1 查看网络IP和网关

| 命令语法 | 实操举例 | 功能                       |
| -------- | -------- | -------------------------- |
| ifconfig | ifconfig | 显示所有网络接口的配置信息 |

### 5.2 Linux中配置网络IP地址

- 测试主机之间的网络连通性

| 命令语法            | 实操举例                                     | 功能                     |
| ------------------- | -------------------------------------------- | ------------------------ |
| ping [目标主机地址] | ping 192.168.145.0<br />ping `www.baidu.com` | 测试与目标主机的是否连通 |

- 修改IP配置文件

  ```shell
  vi /etc/sysconfig/network-scripts/ifcfg-ens33
  ```

![image-20200401204222673](linux.assets/image-20200401204222673.png)

### 5.3 配置主机名

- 查询主机名称

| 命令语法 | 实操举例 | 功能                     |
| -------- | -------- | ------------------------ |
| hostname | hostname | 查看当前服务器主机的名称 |

- 修改主机名称

  ```shell
  vi /etc/hostname
  ```

- 修改Linux主机映射文件，使IP地址与主机名一一对应，进而可以直接以主机名进行后续配置

  ```shell
  vi /etc/hosts
  ```

![image-20200401204708529](linux.assets/image-20200401204708529.png)

- Windows中的hosts文件位于C:\Windows\System32\drivers\etc\hosts

### 5.4 服务相关命令

- 与服务相关的命令
  - service、chkconfig操作的服务位于/etc/init.d下
  - systemctl操作的服务位于/usr/lib/systemd/system下

| 命令语法                                     | 实操举例                                      | 功能                        |
| -------------------------------------------- | --------------------------------------------- | --------------------------- |
| service [服务名] start/stop/restart/status   | service network start/stop/restart/status     | 启动/关闭/重启/查看指定服务 |
| chkconfig                                    | chkconfig                                     | 查看所有服务的自动启动配置  |
| chkconfig [服务名] off                       | chkconfig iptables off                        | 关闭指定服务的自动启动      |
| chkconfig [服务名] on                        | chkconfig iptables on                         | 开启指定服务的自动启动      |
| chkconfig [服务名] --list                    | chkconfig iptables --list                     | 查看指定服务的自动启动状态  |
| systemctl start/stop/restart/status [服务名] | systemctl start/stop/restart/status firewalld | 启动/关闭/重启/查看指定服务 |
| systemctl disable [服务名]                   | systemctl disable firewalld                   | 关闭指定服务的自动启动      |
| systemctl enable [服务名]                    | systemctl enable firewalld                    | 开启指定服务的自动启动      |
| systemctl list-unit-files                    | systemctl list-unit-files                     | 查看所有服务的自动启动状态  |

- Linux的运行级别
  - 运行级别0：系统停机状态，设为默认后不能正常启动；
  - 运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登录；
  - 运行级别2：多用户状态，不支持网络；
  - 运行级别3：多用户状态，支持网络，登录后使用控制台命令行模式（CentOS7中讲话为multi-user.target）；
  - 运行级别4：系统未使用，保留；
  - 运行级别5：X11控制台，登录后进入图形化界面模式（CentOS中简化为graphical.target）；
  - 运行级别6：系统正常关闭并重启，设为默认后不能正常启动。

### 5.5 关机相关命令

| 命令语法           | 实操举例         | 功能                     |
| ------------------ | ---------------- | ------------------------ |
| sync               | sync             | 将数据从内存同步到硬盘中 |
| halt               | halt             | 关机                     |
| reboot             | reboot           | 重启                     |
| shutdown -h [时间] | shut down -h now | 经过 [时间] 分钟后关机   |
| shutdown -r [时间] | shut down -r 1   | 经过 [时间] 分钟后重启   |



## 第六章 远程登录

使用XShell远程登录Linux主机。



## 第七章 常用基本命令

### 7.1 帮助命令及常用快捷键

| 命令语法             | 实操举例 | 功能                        |
| -------------------- | -------- | --------------------------- |
| man [命令或配置文件] | man ls   | 获得帮助信息                |
| help [命令]          | help cd  | 获得shell内置命令的帮助信息 |

| 快捷键   | 功能             |
| -------- | ---------------- |
| ctrl + c | 停止进程         |
| ctrl + l | 清屏             |
| ctrl + q | 退出             |
| Tab      | 提示             |
| ↑ ↓      | 查找执行过的命令 |

### 7.2 操作文件目录类

#### 7.2.1 pwd

| 命令语法 | 实操举例 | 功能                       |
| -------- | -------- | -------------------------- |
| pwd      | pwd      | 显示当前工作目录的绝对路径 |

#### 7.2.2 ls

| 命令语法               | 实操举例                 | 功能                                                         |
| ---------------------- | ------------------------ | ------------------------------------------------------------ |
| ls [选项] [目录或文件] | ls<br />ls -a<br />ls -l | 列出当前目录内容<br />列出当前目录包含隐藏的全部内容<br />列出当前目录内容的详细信息（也可直接使用ll） |

#### 7.2.3 cd

| 命令语法                                                     | 实操举例                                                     | 功能                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| cd [绝对路径]<br />cd [相对路径]<br />cd ~  /  cd<br />cd -<br />cd ..<br />cd -P | cd /root<br />cd root<br />cd ~  /  cd<br />cd -<br />cd ..<br />cd -P | 切换路径<br />切换路径<br />回到当前用户家目录<br />回到上一次所在目录<br />回到上一级目录<br />跳转到实际物理路径 |

#### 7.2.4 mkdir

| 命令语法                          | 实操举例                                         | 功能                                 |
| --------------------------------- | ------------------------------------------------ | ------------------------------------ |
| mkdir [目录]<br />mkdir -p [目录] | mkdir atguigu<br />mkdir -p atguigu/songsong/123 | 创建一个目录<br />递归的创建多级目录 |

#### 7.2.5 rmdir

| 命令语法     | 实操举例      | 功能             |
| ------------ | ------------- | ---------------- |
| rmdir [目录] | rmdir atguigu | 删除一个空的目录 |

#### 7.2.6 touch

| 命令语法       | 实操举例          | 功能         |
| -------------- | ----------------- | ------------ |
| touch [文件名] | touch atguigu.txt | 创建一个文件 |

#### 7.2.7 cp

| 命令语法                                                     | 实操举例                                                     | 功能                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| cp [source] [dest]<br />cp -r [source] [dest]<br />\cp [source] [dest] | cp atguigu /home<br />cp -r /root /home<br />\cp atguigu /home | 复制source到dest<br />递归的复制source到dest<br />强制覆盖复制source到dest |

#### 7.2.8 rm

| 命令语法                            | 实操举例       | 功能                                                         |
| ----------------------------------- | -------------- | ------------------------------------------------------------ |
| rm<br />rm -r<br />rm -f<br />rm -v | rm -rf atguigu | 删除文件或空目录<br />递归删除目录及目录下所有文件<br />强制删除<br />删除并显示执行过程 |

#### 7.2.9 mv

| 命令语法                                               | 实操举例                                     | 功能                     |
| ------------------------------------------------------ | -------------------------------------------- | ------------------------ |
| mv [原文件] [新文件]<br />mv [文件原路径] [文件新路径] | mv atguigu songsong<br />mv /home/atguigu ./ | 重命名文件<br />移动文件 |

#### 7.2.10 cat

| 命令语法                      | 实操举例                                | 功能                               |
| ----------------------------- | --------------------------------------- | ---------------------------------- |
| cat [文件]<br />cat -n [文件] | cat atguigu.txt<br />cat -n atguigu.txt | 查看文件<br />查看文件（显示行号） |

#### 7.2.11 more

| 命令语法    | 实操举例         | 功能                 |
| ----------- | ---------------- | -------------------- |
| more [文件] | more atguigu.txt | 查看文件（按页显示） |

- 使用more命令查看文件时可执行一系列操作

| 快捷键 | 功能                     |
| ------ | ------------------------ |
| Space  | 下一页                   |
| Enter  | 下一行                   |
| q      | 退出                     |
| =      | 输出当前行的行号         |
| :f     | 输出文件名和当前行的行号 |

#### 7.2.12 less

| 命令语法    | 实操举例         | 功能                 |
| ----------- | ---------------- | -------------------- |
| less [文件] | less atguigu.txt | 查看文件（按页显示） |

- 使用less命令查看文件时可执行一系列操作

| 快捷键   | 功能                                 |
| -------- | ------------------------------------ |
| Space    | 下一页                               |
| PageDowm | 下一页                               |
| PageUp   | 上一页                               |
| /字符串  | 向下查找字符串，n：下一个，N：上一个 |
| ?字符串  | 向上查找字符串，n：下一个，N：上一个 |
| q        | 退出                                 |

#### 7.2.13  echo

| 命令语法                                | 实操举例                                 | 功能                                                         |
| --------------------------------------- | ---------------------------------------- | ------------------------------------------------------------ |
| echo [输出内容]<br />echo -e [输出内容] | echo "hello"<br />echo -e "hello\tworld" | 输出指定内容到控制台<br />输出指定内容到控制台，<br />支持转义符（\\\）、换行符（\n）、制表符（\t） |

#### 7.2.14 head

| 命令语法                               | 实操举例                                    | 功能                                                 |
| -------------------------------------- | ------------------------------------------- | ---------------------------------------------------- |
| head [文件]<br />head -n [行数] [文件] | head atguigu.txt<br />head -n 5 atguigu.txt | 查看文件前10行的内容<br />查看文件前 [行数] 行的内容 |

#### 7.2.15 tail

| 命令语法                                                   | 实操举例                                                     | 功能                                                         |
| ---------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| tail [文件]<br />tail -n [行数] [文件]<br />tail -f [文件] | tail atguigu.txt<br />tail -n 7 atguigu.txt<br />tail -f atguigu.txt | 查看文件最后10行的内容<br />查看文件最后 [行数] 行的内容<br />显示文件新追加的内容，监视实时变化 |

#### 7.2.16 > >>

| 命令语法                                                     | 实操举例                                                     | 功能                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| [输出内容] > [文件]<br />[输出内容] >> [文件]<br />[文件1] > [文件1] | ls > atguigu.txt<br />echo "hello" >> atguigu.txt<br />cat songsong.txt > hongong.txt | 将输出内容覆盖写入文件<br />将输出内容追加写入文件<br />将文件1内容覆盖写入文件2 |

#### 7.2.17 ln

| 命令语法                        | 实操举例                     | 功能                               |
| ------------------------------- | ---------------------------- | ---------------------------------- |
| ln -s [原文件或目录] [软链接名] | ln -s /home/atguigu songsong | 为原文件创建一个软链接（快捷方式） |
| rm -rf [删除软链接]             | rm -rf songsong              | 删除软链接（对原文件没有影响）     |

#### 7.2.18 history

| 命令语法 | 实操举例 | 功能                         |
| -------- | -------- | ---------------------------- |
| history  | history  | 查看已经执行过的历史命令清单 |



### 7.3 时间日期类

#### 7.3.1 date显示当前时间

| 命令语法             | 实操举例                  | 功能                     |
| -------------------- | ------------------------- | ------------------------ |
| date                 | date                      | 显示当前时间             |
| date +[参数]         | date +%Y%m%d              | 显示当前年月日           |
| date +"[带参字符串]" | date +"%Y-%m-%d %H:%M:%S" | 按照指定格式显示当前时间 |

#### 7.3.2 date显示指定时间

| 命令语法                  | 实操举例                                        | 功能                               |
| ------------------------- | ----------------------------------------------- | ---------------------------------- |
| date -d ‘[数字] days ago’ | date -d ‘1 days ago’<br />date -d ‘-1 days ago’ | 显示前一天时间<br />显示后一天时间 |

- 可与时间参数组合使用

#### 7.3.3 date设置系统时间

| 命令语法               | 实操举例                    | 功能                     |
| ---------------------- | --------------------------- | ------------------------ |
| date -s "[时间字符串]" | date -s “20200404 18:00:00” | 使用规定格式设置系统时间 |

#### 7.3.4 cal日历

| 命令语法   | 实操举例          | 功能                                     |
| ---------- | ----------------- | ---------------------------------------- |
| cal [年份] | cal<br />cal 2020 | 显示当月日历<br />显示指定年份的全年日历 |



### 7.4 用户管理类

#### 7.4.1 useradd

| 命令语法                                         | 实操举例                                | 功能                                 |
| ------------------------------------------------ | --------------------------------------- | ------------------------------------ |
| useradd [用户名]<br />useradd -g [组名] [用户名] | useradd lcx<br />useradd -g atguigu lcx | 添加用户<br />添加用户到**已有**的组 |

7.4.2 passwd

| 命令语法        | 实操举例   | 功能         |
| --------------- | ---------- | ------------ |
| passwd [用户名] | passwd lcx | 设置用户密码 |

#### 7.4.3 id

| 命令语法    | 实操举例 | 功能                           |
| ----------- | -------- | ------------------------------ |
| id [用户名] | id lcx   | 查看指定用户uid，gid，组名信息 |

#### 7.4.4 cat  /etc/passwd

| 命令语法        | 实操举例        | 功能                   |
| --------------- | --------------- | ---------------------- |
| cat /etc/passwd | cat /etc/passwd | 查看当前主机下所有用户 |

#### 7.4.5 su

| 命令语法      | 实操举例 | 功能                                                   |
| ------------- | -------- | ------------------------------------------------------ |
| su [用户名]   | su lcx   | 切换用户（仅切换到目标用户的执行权限，不改变环境变量） |
| su - [用户名] | su - lcx | 切换用户（切换到目标用户，获得其执行权限及环境变量）   |

#### 7.4.6 userdel

| 命令语法            | 实操举例       | 功能                     |
| ------------------- | -------------- | ------------------------ |
| userdel [用户名]    | userdel lcx    | 删除用户，保留用户主目录 |
| userdel -r [用户名] | userdel -r lcx | 删除用户，删除用户主目录 |

#### 7.4.7 who

| 命令语法 | 实操举例 | 功能                   |
| -------- | -------- | ---------------------- |
| whoami   | whoami   | 显示自身用户的名称     |
| who am i | who am i | 显示登录时用户的用户名 |

#### 7.4.8 sudo（需要配置）

设置普通用户获得root权限

1. 打开配置文件 vi /etc/sudoers

2. 找到 root ALL=(ALL) ALL 行并在下一行添加语句

   ```java
   root	ALL=(ALL)	ALL
   lcx	ALL=(ALL)	ALL//使用sudo时，需要输入root密码
   //或
   lcx	ALL=(ALL)	NOPASSWD:ALL//使用sudo时，不需要输入root密码
   ```

3. 使用sudo命令获取root权限

| 命令语法        | 实操举例         | 功能                               |
| --------------- | ---------------- | ---------------------------------- |
| sudo [命令语句] | sudo useradd lcx | 使用root权限执行命令（仅生效一次） |

#### 7.4.9 usemod

| 命令语法                   | 实操举例                | 功能             |
| -------------------------- | ----------------------- | ---------------- |
| usermod -g [组名] [用户名] | usermode -g atguigu lcx | 修改用户所属的组 |



### 7.5 组管理类

#### 7.5.1 groupadd

| 命令语法        | 实操举例         | 功能   |
| --------------- | ---------------- | ------ |
| groupadd [组名] | groupadd atguigu | 添加组 |

#### 7.5.2 groupdel

| 命令语法        | 实操举例         | 功能   |
| --------------- | ---------------- | ------ |
| groupdel [组名] | groupdel atguigu | 删除组 |

#### 7.5.3 groupmod

| 命令语法                      | 实操举例                    | 功能     |
| ----------------------------- | --------------------------- | -------- |
| groupmod -n [新组名] [原组名] | groupmod -n atguigu bigdata | 重命名组 |

#### 7.5.4 cat /etc/group

| 命令语法       | 实操举例       | 功能           |
| -------------- | -------------- | -------------- |
| cat /etc/group | cat /etc/group | 查看所有组信息 |



### 7.6 文件权限类

#### 7.6.1 文件属性

- 十个字符表示的含义

  ![image-20200405212933554](linux.assets/image-20200405212933554.png)

  - 首位表示文件类型
    - \- 表示文件
    - d 表示目录
    - l 表示链接
  - 1-3位表示属主用户拥有的对该文件的权限
  - 4-6位表示属组用户拥有的对该文件的权限
  - 7-9位表示其他用户拥有的对该文件的权限

- rxw的说明

  - 作用于文件
    - r：读取，查看
    - w：修改内容
    - x：被系统执行
  - 作用于目录
    - r：查看目录下的文件
    - w：在目录下进行创建、删除、重命名操作
    - x：进入目录

#### 7.6.2 chmod

| 命令语法                                     | 实操举例          | 功能                 |
| -------------------------------------------- | ----------------- | -------------------- |
| chmod \[u/g/o/a]\[+/-/=][r/w/x] [文件或目录] | chmod u+x lcx.txt | 修改文件或目录的权限 |
| chmod [xxx] [文件或目录]                     | chmod 777 lcx.txt | 修改文件或目录的权限 |

- u：所属者用户，g：所属组用户，o：其他用户，a：所有用户
- r=4，w=2，x=1，相加后可使用三位数字简洁的一次性设置对于不同用户的权限（如777）

#### 7.6.3 chown

| 命令语法                       | 实操举例             | 功能                                         |
| ------------------------------ | -------------------- | -------------------------------------------- |
| chown [用户名] [文件或目录]    | chown lcx lcx.txt    | 修改文件或目录的所有者                       |
| chown -R [用户名] [文件或目录] | chown -R lcx atguigu | 递归地修改目录及目录下所有文件或目录的所有者 |

#### 7.6.4 chgrp

| 命令语法                  | 实操举例              | 功能                   |
| ------------------------- | --------------------- | ---------------------- |
| chgrp [组名] [文件或目录] | chgrp atguigu lcx.txt | 修改文件或目录的所属组 |



### 7.7 搜索查找类

#### 7.7.1 find

| 命令语法                                | 实操举例               | 功能                             |
| --------------------------------------- | ---------------------- | -------------------------------- |
| find [搜索范围] -name                   | find /opt *.txt        | 根据文件名查找指定范围下的文件   |
| find [搜索范围] -user                   | find /home -user lcx   | 根据所属用户查找指定范围下的文件 |
| find [搜索范围] -size [+/ /- 文件大小 ] | find /root -size +100k | 根据文件大小查找指定范围下的文件 |

- 文件大小单位
  - b —— 块（512字节）
  - c —— 字节
  - w —— 字（2字节）
  - k —— 千字节
  - M —— 兆字节
  - G —— 吉字节

#### 7.7.2 locate

- 前提：使用 yum install mlocate 安装locate命令，再使用updatedb指令创建locate数据库

  ```shell
  yum -y install mlocate
  ```

  

| 命令语法          | 实操举例   | 功能               |
| ----------------- | ---------- | ------------------ |
| locate [搜索内容] | locate tmp | 搜索目标文件或目录 |

#### 7.7.3 grep

| 命令语法                     | 实操举例             | 功能                       |
| ---------------------------- | -------------------- | -------------------------- |
| [命令] \| grep [查找内容]    | ps -ef \| grep mysql | 过滤查找目标内容           |
| [命令] \| grep -n [查找内容] | ls \| grep -n test   | 过滤查找目标内容并显示行号 |



### 7.8 压缩和解压类

#### 7.8.1 gzip/gunzip

| 命令语法        | 实操举例          | 功能                                   |
| --------------- | ----------------- | -------------------------------------- |
| gzip [文件]     | gzip lcx.txt      | 仅能压缩一个文件，且压缩后原文件不保留 |
| gunzip [gz文件] | gunzip lcx.txt.gz | 解压缩文件，不保留原文件               |

#### 7.8.2 zip/unzip

| 命令语法                                                | 实操举例                                         | 功能                                                         |
| ------------------------------------------------------- | ------------------------------------------------ | ------------------------------------------------------------ |
| zip [压缩文件名] [文件]<br />zip -r [压缩文件名] [目录] | zip lcx.txt<br />zip atguigu                     | 压缩文件，保留原文件<br />压缩目录，保留原目录               |
| unzip [压缩文件名]<br />unzip [压缩文件名] -d [目录名]  | unzip lcx.txt.zip<br />unzip lcx.txt.zip -d /opt | 解压缩文件到当前目录，保留原文件或目录<br />解压缩文件到指定目录，保留原文件或目录 |

#### 7.8.3 tar

| 命令语法                                                     | 实操举例                                                     | 功能                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| tar -zcvf [压缩文件名] [文件或目录]                          | tar -zcvf atguigu.tar.gz atguigu                             | 压缩文件，保留原文件                                         |
| tar -zxvf [压缩文件名]<br />tar -zxvf [压缩文件名] -C [目录] | tar -zxvf atguigu.tar.gz<br />tar -zxvf atguigu.tar.gz -C /opt | 解压缩文件到当前目录，保留原文件<br />解压缩文件到指定目录，保留原文件 |

- 选项说明
  - -c：产生.tar打包文件
  - -v：显示详细信息
  - -f：指定压缩后的文件名
  - -z：打包同时压缩
  - -x：解包.tar文件



### 7.9 磁盘分区类

#### 7.9.1 df

| 命令语法 | 实操举例 | 功能                       |
| -------- | -------- | -------------------------- |
| df -h    | df -h    | 查看文件系统的磁盘占用情况 |

#### 7.9.2 fdisk

| 命令语法 | 实操举例 | 功能                             |
| -------- | -------- | -------------------------------- |
| fdisk -l | fdisk -l | 查看磁盘分区详情（需要root权限） |

#### 7.9.3 lsblk

| 命令语法 | 实操举例 | 功能                               |
| -------- | -------- | ---------------------------------- |
| lsblk -f | lsblk -f | 查看设备挂载情况，显示文件系统信息 |

#### 79.4 mount/umount

| 命令语法                                            | 实操举例                                | 功能               |
| --------------------------------------------------- | --------------------------------------- | ------------------ |
| mount [-t vfstype] [-o options] [连接设备] [挂载点] | mount -t iso9660 /dev/cdrom /mnt/cdrom/ | 将设备挂载到挂载点 |
| umount [挂载点]                                     | umount /mnt/cdrom                       | 卸载挂载点         |

- 关于vfstype，系统一般会自动选择类型，也可以手动选择
  - 光盘或镜像：iso9660
  - DOS fat16文件系统：msdos
  - Windows9x fat32文件系统：vfat
  - Windows NT ntfs文件系统：ntfs
  - Mount Windows文件网络共享：smbfs
  - UNIX（LINUX）文件网络共享：nfs
- 关于options，用于描述设备或档案的挂接方式
  - loop：把一个文件当作硬盘分区挂接
  - ro：采用只读方式挂接
  - rw：采用读写方式挂接
  - iocharset：指定文件访问系统使用的字符集



### 7.10 进程和线程类

#### 7.10.1 ps

| 命令语法                   | 实操举例              | 功能                         |
| -------------------------- | --------------------- | ---------------------------- |
| ps -aux \| grep [筛选内容] | ps -aux \| grep mysql | 查看系统中筛选的所有进程信息 |
| ps -ef \| grep [筛选内容]  | ps -ef \| grep mysql  | 查看筛选的进程的子父关系     |

- ps -aux 的信息说明

  | 名称     | 说明                                                         |
  | -------- | ------------------------------------------------------------ |
  | USER     | 产生进程的用户                                               |
  | **PID**  | **进程的ID号**                                               |
  | **%CPU** | **该进程占用CPU资源的百分比，占用越高，进程越耗费资源**      |
  | **%MEM** | **该进程占用物理内存的百分比，占用越高，进程越耗费资源**     |
  | VSZ      | 该进程占用虚拟内存的大小，单位KB                             |
  | RSS      | 该进程占用实际物理内存的大小，单位KB                         |
  | TTY      | 该进程的运行终端                                             |
  | STAT     | 进程状态。常见的状态有：R：运行、S：睡眠、T：停止状态、s：包含子进程、+：位于后台 |
  | START    | 该进程的启动时间                                             |
  | TIME     | 该进程占用CPU的运算时间，注意不是系统时间                    |
  | COMMAND  | 产生此进程的命令名                                           |

- ps -ef 的信息说明

  | 名称     | 说明                                                         |
  | -------- | ------------------------------------------------------------ |
  | UID      | 用户ID                                                       |
  | **PID**  | **进程ID**                                                   |
  | **PPID** | **父进程ID**                                                 |
  | C        | CPU用于计算执行优先级的因子。<br />数值越大，表明进程是CPU密集型运算，执行优先级会降低；<br />数值越小，表明进程是I/O密集型运算，执行优先级会提高 |
  | STIME    | 进程启动的时间                                               |
  | TTY      | 完整的终端名称                                               |
  | TIME     | 该进程占用CPU的运算时间，注意不是系统时间                    |
  | CMD      | 启动进程所用的命令和参数                                     |


#### 7.10.2 kill

| 命令语法          | 实操举例        | 功能                           |
| ----------------- | --------------- | ------------------------------ |
| kill [进程号]     | kill 1234       | 通过进程号结束进程             |
| kill -9 [进程号]  | kill -9 1234    | 通过进程号强制结束进程         |
| kill all [进程名] | killall firefox | 通过进程名结束进程，支持通配符 |

#### 7.10.3 pstree

- 前提：使用 yum -y install psmisc 安装pstree命令

  ```shell
  yum -y install psmisc
  ```


| 命令语法  | 实操举例  | 功能                           |
| --------- | --------- | ------------------------------ |
| pstree -p | pstree -p | 查看进程树，显示进程的PID      |
| pstree -u | pstree -u | 查看进程树，显示进程的所属用户 |

#### 7.10.4 top

| 命令语法        | 实操举例    | 功能                                          |
| --------------- | ----------- | --------------------------------------------- |
| top -d [秒数]   | top -d 5    | 查看系统进程状态，指定刷新时间（秒），默认3秒 |
| top -i          | top -i      | 查看系统进程状态，筛除闲置或僵死进程          |
| top -p [进程号] | top -p 1234 | 查看指定进程的状态                            |

- top监控状态下的相关操作
  - P：以CPU使用率排序（默认）
  - M：以内存使用率排序
  - N：以PID排序
  - q：退出

#### 7.10.5 netstat

| 命令语法                      | 实操举例                   | 功能                     |
| ----------------------------- | -------------------------- | ------------------------ |
| netstat -anp \| grep [进程号] | netstat -anp \| grep 12    | 查看指定进程的网络信息   |
| netstat -nlp \| grep [端口号] | netstat -nlp \| grep 20670 | 查看网络端口号的占用情况 |



### 7.11 系统定时任务 crontab

- 启动crond服务：service crond start

| 命令语法   | 实操举例   | 功能                         |
| ---------- | ---------- | ---------------------------- |
| crontab -e | crontab -e | 编辑定时任务                 |
| crontab -l | crontab -l | 查看当前用户的定时任务       |
| crontab -r | crontab -r | 删除当前用户的的所有定时任务 |

- crontab的编辑

  - 格式： * * * * * [任务]

  - 每个*的含义

    | 项目    | 含义             | 取值范围              |
    | ------- | ---------------- | --------------------- |
    | 第一个* | 一小时的第几分钟 | 0-59                  |
    | 第二个* | 一天的第几小时   | 0-23                  |
    | 第三个* | 一月的第几天     | 1-31                  |
    | 第四个* | 一年的第几月     | 1-12                  |
    | 第五个* | 一周的第几天     | 0-7（0，7均表示周日） |

  - 特殊符号的使用

    | 符号 | 含义                                                         |
    | ---- | ------------------------------------------------------------ |
    | *    | 代表每一次都执行，如每分钟、每小时、每天执行                 |
    | ,    | 代表不连续的时间，如0，5，15，40代表每到第0，5，15，40分钟执行 |
    | -    | 代表一定范围的时间，如1-6代表每周一至周六执行                |
    | */n  | 代表每隔一定时间，如*/10代表每隔10分钟执行                   |



## 第八章 软件包管理

### 8.1 RPM

#### 8.1.1 概述

- RPM（RedHat Package Manager）是一款软件包管理工具，是Linux系统里的打包安装工具，文件后缀为.rpm
- 命名格式一般为软件名+版本号+硬件平台+扩展名，如Apache-1.3.23-11.i386.rpm

#### 8.1.2 查询

| 命令语法 | 实操举例 | 功能                                              |
| -------- | -------- | ------------------------------------------------- |
| rpm -qa  | rpm -qa  | 查看已安装的所有rpm软件包（可使用管道符配合查找） |

#### 8.1.3 卸载

| 命令语法                 | 实操举例                | 功能                       |
| ------------------------ | ----------------------- | -------------------------- |
| rpm -e [软件名]          | rpm -e firefox          | 卸载软件包                 |
| rpm -e --nodeps [软件名] | rpm -e --nodeps firefox | 卸载软件包，不检查依赖关系 |

#### 8.1.4 安装

| 命令语法                    | 实操举例                                                 | 功能                   |
| --------------------------- | -------------------------------------------------------- | ---------------------- |
| rpm -ivh [rpm包名]          | rpm -ivh firefox-45.0.1-1.el6.centos.x86_64.rpm          | 安装软件包             |
| rpm -ivh --nodeps [rpm包名] | rpm -ivh --nodeps firefox-45.0.1-1.el6.centos.x86_64.rpm | 安装软件包，不检查依赖 |



### 8.2 YUM

#### 8.2.1 概述

- YUM（Tellow dog Update Modified）是一个Shelll前端软件包管理器，基于RPM包管理，可以从指定服务器下载并安装RPM包，可以自动的处理依赖关系，并一次性安装所有依赖的软件包。
- YUM类似于Maven，将海量的RPM软件包统一的在中央仓库中维护，用于用户下载安装。

#### 8.2.2 常用命令

| 命令语法      | 实操举例                      | 功能                      |
| ------------- | ----------------------------- | ------------------------- |
| yum -y [参数] | yum -y install firefox.x86_64 | 对指定rpm包进行指定的操作 |

- 参数类型

  | 参数         | 功能                          |
  | ------------ | ----------------------------- |
  | install      | 安装rpm软件包                 |
  | update       | 更新rpm软件包                 |
  | check-update | 检查rpm软件包是否有可用的更新 |
  | remove       | 卸载rpm软件包                 |
  | list         | 显示rpm软件包信息             |
  | clean        | 清理yum的过期缓存             |
  | deplist      | 显示rpm软件包的所有依赖关系   |

#### 8.2.3 修改网络YUM源（需要配置）

1. 安装wget，用于从指定URL下载文件

   ```shell
   yum install wget
   ```

2. 备份 /etc/yum.repos.d/ 目录下的CentOS-Base.repo文件

   ```shell
   cp CentOS-Base.repo CentOS-Base.repo.backup
   ```

3. 下载阿里云的repos文件

   ```shell
   wget http://mirrors.aliyun.com/repo/Centos-7.repo
   ```

4. 使用下载的Centos-7.repo文件替换原有的CentOS-Base.repo文件

   ```shell
   mv Centos-7.repo CentOS-Base.repo
   ```

5. 清理缓存数据，并缓存新服务器的包信息

   ```shell
   yum clean all
   yum makecache
   ```

6. 删除备份的CentOS-Base.repo文件（可选）

   ```shell
   rm CentOS-Base.repo.backup
   ```

#### 8.2.4 常用的YUM包

- 当需要的指令或依赖未安装时，可以使用yum的搜索功能

```shell
yum search [命令名]
#如
yum search ifconfig
```

- 常用的yum包

```shell
#安装vim
yum -y install vim*
#安装ifconfig
yum -y install net-tools.x86_64
#安装locate
yum -y install mlocate
#安装pstree
yum -y install psmisc
#安装wget
yum -y install wget
#安装mysql的相关依赖
yum -y install perl perl-devel
yum -y install libaio
```

